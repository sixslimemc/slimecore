use ::slimecore::mcdoc::def::BuildInfo
use ::slimecore::mcdoc::def::EvalResult
use ::slimecore::mcdoc::def::PackManifest

inject struct ::slimecore::mcdoc::api::In {
    pack: struct In {
        pack: (PackManifest | any)
    }
}

inject struct ::slimecore::mcdoc::api::Out {
    pack: struct Out {
        result: Result
    }
}

type Result = EvalResult<Success, Error>

type Success = PackManifest

struct KeyInfo {
    name: string,
    index?: int
}

struct Error {
    missing_keys?: [struct MissingKeyInfo {key: KeyInfo}],
    invalid_values?: [struct InvalidTypeInfo {
        key: KeyInfo,
        value: any,
        reason: string,
    }],
}